# 智能配餐推荐系统 - 用户使用指南

## 快速开始

### 编译和运行
```bash
# 编译项目
./build.sh

# 运行程序
./build/bin/MealRecommendationSystem
```

---

## 功能说明

### 1. 用户注册与登录

#### 首次使用 - 注册新用户
1. 选择 `2. 用户注册`
2. 输入用户名和密码
3. 设置个人信息：
   - 年龄
   - 体重 (kg)
   - 身高 (cm)
   - 性别（男性/女性）
   - 活动水平（久坐/轻度/中度/高强度/极高强度）
4. 系统会自动计算您的每日营养目标

#### 再次使用 - 登录
1. 选择 `1. 用户登录`
2. 输入用户名和密码

---

### 2. 查看个人信息

选择主菜单中的 `1. 查看个人信息`

**显示内容：**
- 基本信息（年龄、性别、体重、身高、活动水平）
- 每日营养目标（热量、蛋白质、碳水化合物、脂肪）
- 口味偏好和过敏源列表

**可以修改资料：**
- 输入 `y` 进入修改模式
- 重新输入所有信息
- 系统会重新计算营养目标

---

### 3. 查看食物数据库

选择主菜单中的 `2. 查看食物数据库`

#### 浏览所有食物
选择 `1. 浏览所有食物`，查看完整的50种食物列表，包括：
- 食物名称
- 营养成分（热量、蛋白质、碳水、脂肪、膳食纤维）
- 口味标签
- 食物类别

#### 按类别查看
选择 `2. 按类别查看`，可以查看：
- 主食类（白米饭、糙米饭、全麦面包、燕麦粥、红薯、玉米等）
- 肉类（鸡胸肉、三文鱼、牛肉、虾仁、鱼片等）
- 蔬菜类（西兰花、菠菜、胡萝卜、番茄、蘑菇等）
- 豆制品（豆腐、豆浆、豆腐干、黑豆）
- 蛋类（鸡蛋、鸭蛋、鹌鹑蛋、松花蛋）
- 水果类（苹果、香蕉、橙子、草莓、蓝莓等）
- 坚果类（核桃、花生、杏仁、腰果）
- 奶制品（牛奶、酸奶、奶酪、希腊酸奶）

#### 按标签搜索
选择 `3. 按标签搜索`，输入标签如：
- 口味标签：`清淡`、`甜`、`酸`、`咸`、`鲜`、`香`
- 特殊标签：`海鲜`
- 过敏源标签

---

### 4. 生成餐单推荐 ⭐️核心功能

选择主菜单中的 `3. 生成餐单推荐`

#### 使用流程
1. **输入日期**：格式为 YYYY-MM-DD，例如 `2024-01-15`
2. **查看推荐**：系统会自动生成一日三餐：
   - **早餐**：主食 + 蛋类 + 奶制品 + 水果
   - **午餐**：主食 + 肉类 + 蔬菜
   - **晚餐**：主食 + 蔬菜 + 豆制品 + 少量肉类
3. **查看统计**：
   - 每餐的营养成分
   - 全天营养总计
   - 各餐热量占比
4. **保存推荐**：输入 `y` 保存到历史记录

#### 推荐算法特点
- ✨ **个性化**：根据您的营养目标和体重活动量定制
- ✨ **智能避免**：自动排除过敏源和不喜欢的口味
- ✨ **多样性**：避免推荐最近常吃的食物
- ✨ **营养平衡**：自动搭配各类食物达成营养目标
- ✨ **科学配比**：早中晚餐按 30%-40%-30% 分配热量

---

### 5. 管理历史餐单 ⭐️核心功能

选择主菜单中的 `4. 管理历史餐单`

#### 5.1 查看所有历史餐单
选择 `1. 查看所有历史餐单`

**显示内容：**
- 按日期分组的所有餐单
- 每个餐单的详细食物列表和营养信息
- 每日营养总计
- 目标完成度百分比

#### 5.2 查看特定日期的餐单
选择 `2. 查看特定日期的餐单`

1. 输入日期（YYYY-MM-DD）
2. 查看该日所有餐单详情
3. 查看当日营养汇总：
   - 热量完成度
   - 蛋白质完成度
   - 碳水化合物完成度
   - 脂肪完成度

#### 5.3 删除餐单
选择 `3. 删除餐单`

1. 从列表中选择要删除的餐单
2. 显示餐单的日期、餐型、热量
3. 输入 `y` 确认删除
4. 系统自动保存更新

#### 5.4 编辑餐单 ⭐️新功能
选择 `4. 编辑餐单`

**三种编辑方式：**

1. **添加食物**
   - 浏览完整食物数据库
   - 选择要添加的食物
   - 自动重新计算营养总量

2. **移除食物**
   - 查看当前餐单中的食物
   - 选择要移除的食物
   - 自动更新营养统计

3. **替换食物** 🔥智能推荐
   - 选择要替换的食物
   - 系统推荐5个相似的替代食物
   - 推荐依据：
     - 相似营养成分
     - 符合口味偏好
     - 避开过敏源
   - 一键替换

#### 5.5 对比营养目标 ⭐️新功能
选择 `5. 对比营养目标`

**单日对比：**
- 输入具体日期
- 查看当日四大营养素完成情况
- 状态标注：
  - `[未达标]`：低于目标的90%
  - `[良好]`：90%-110%之间
  - `[超标]`：超过目标的110%

**全部历史对比：**
- 留空日期直接回车
- 查看所有历史记录的平均值
- 评估整体饮食习惯
- 了解长期营养摄入趋势

---

### 6. 口味偏好管理

选择主菜单中的 `5. 口味偏好管理`

#### 当前偏好显示
系统会显示您当前的：
- 喜欢的标签
- 避免的标签
- 过敏源列表

#### 管理操作
1. **添加喜欢的标签**：推荐时优先选择这些口味的食物
2. **添加避免的标签**：推荐时尽量不选择这些口味的食物
3. **添加过敏源**：推荐时完全排除这些食物（例如：`海鲜`、`奶制品`）
4. **移除喜欢的标签**：取消某个偏好
5. **移除避免的标签**：不再避免某个口味
6. **移除过敏源**：取消过敏源设置

**常用标签：**
- `清淡`、`甜`、`酸`、`咸`、`鲜`、`香`
- `海鲜`（作为过敏源标签）

---

### 7. 营养统计

选择主菜单中的 `6. 营养统计`

**统计内容：**
- 历史餐单总数
- 平均每餐营养摄入：
  - 热量 (kcal)
  - 蛋白质 (g)
  - 碳水化合物 (g)
  - 脂肪 (g)
- 营养目标完成情况：
  - 热量完成度百分比
  - 蛋白质完成度百分比

---

## 使用技巧

### 💡 获得更好推荐的建议
1. **完善个人信息**：确保体重、身高、活动水平准确
2. **设置口味偏好**：添加喜欢和避免的标签
3. **标记过敏源**：确保推荐安全
4. **定期生成推荐**：系统会学习您的饮食历史，避免重复

### 💡 有效管理饮食的建议
1. **每天生成推荐**：让系统帮您规划健康饮食
2. **定期查看统计**：了解营养摄入趋势
3. **使用对比功能**：检查是否达标
4. **灵活编辑餐单**：根据实际情况调整食物
5. **利用替换功能**：找到更合适的替代食物

### 💡 活动水平选择指南
- **久坐**：办公室工作，很少运动
- **轻度活动**：轻度运动1-3天/周
- **中度活动**：中度运动3-5天/周
- **高强度活动**：高强度运动6-7天/周
- **极高强度**：每天高强度运动或体力劳动

---

## 常见问题

### Q1: 推荐的食物总是重复怎么办？
**A:** 这不太可能发生，因为系统会：
- 记住最近10次的餐单
- 大幅降低重复食物的评分
- 在评分相近时选择不同的食物
如果确实出现，可能是食物数据库某类别选择少，尝试调整口味偏好。

### Q2: 如何完全排除某种食物？
**A:** 在"口味偏好管理"中：
1. 找到该食物的标签（如 `海鲜`）
2. 选择"添加过敏源"
3. 输入该标签
系统会完全排除包含该标签的所有食物。

### Q3: 推荐的热量总是超标怎么办？
**A:** 
1. 检查个人信息是否准确（特别是体重和活动水平）
2. 考虑编辑餐单，移除部分高热量食物
3. 使用"替换食物"功能，换成低热量的替代品

### Q4: 可以导出餐单吗？
**A:** 当前版本暂不支持导出功能，但所有数据保存在 `data/meals.txt` 文件中，您可以直接查看或用文本编辑器打开。

### Q5: 如何重置系统？
**A:** 删除 `data/` 目录下的文件：
- `users.txt` - 用户数据
- `meals.txt` - 餐单记录
- `foods.txt` - 食物数据（删除后会重新初始化）

---

## 数据文件说明

所有数据保存在 `data/` 目录：

- **users.txt**：用户账号和个人信息
- **foods.txt**：食物数据库（50种食物）
- **meals.txt**：历史餐单记录

**文件格式：** 使用 `|` 分隔字段，`,` 分隔列表

---

## 技术支持

如遇到问题：
1. 检查数据文件是否正常
2. 尝试重新编译：`./build.sh`
3. 查看控制台错误信息
4. 参考 IMPROVEMENTS.md 了解系统架构

---

## 版本信息

**当前版本：** v2.0 Enhanced Edition

**主要改进：**
- ✅ 智能推荐算法优化
- ✅ 完整的历史餐单管理
- ✅ 营养目标对比分析
- ✅ 食物数据库扩充到50种
- ✅ 智能食物替换推荐
- ✅ 偏好管理功能完善

---

祝您使用愉快，健康生活！🎉
